---
- name: install starman
  apt: name=starman state=present
  tags:
    - eye
    - starman

- name: put eye config
  template: src=starman.rb dest={{ eye_home }}/starman.rb
  notify:
      - reload eye
      - eye restart starman
  tags:
    - eye
    - starman
    - config
  
- name: create log dir for starman
  file: path={{ starman_log|regex_replace('[^/]{1,}$','') }} state=directory owner={{ eye_user }}
  tags:
    - eye
    - starman

- name: setup logrotate
  template: src=logrotate.d/starman dest=/etc/logrotate.d/starman_{{ starman_user }}
  tags:
    - eye
    - starman
    - logrotate
